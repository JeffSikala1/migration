conexus fedora:~/conexus/src-conexus-bitbucket/prod/scripts/terraform (feature/terraform)$ terraform plan -out=planoutput
random_string.suffix: Refreshing state... [id=PiXj0AhG]
module.bastion.data.aws_ami.amazon-linux-2: Reading...
module.bastion.data.aws_iam_policy_document.assume_policy_document: Reading...
data.aws_iam_policy.ebs_csi_policy: Reading...
module.irsa-ebs-csi.data.aws_caller_identity.current: Reading...
data.aws_availability_zones.available: Reading...
module.bastion.data.aws_iam_policy_document.assume_policy_document: Read complete after 0s [id=2851119427]
module.eks.data.aws_caller_identity.current: Reading...
module.eks.data.aws_partition.current: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_partition.current: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_caller_identity.current: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_partition.current: Read complete after 0s [id=aws]
module.irsa-ebs-csi.data.aws_partition.current: Reading...
module.eks.data.aws_partition.current: Read complete after 0s [id=aws]
module.irsa-ebs-csi.data.aws_partition.current: Read complete after 0s [id=aws]
module.bastion.aws_kms_key.key: Refreshing state... [id=3de77e16-6bf1-4583-a4fd-7f963554cbf8]
module.eks.module.kms.data.aws_caller_identity.current: Reading...
module.eks.aws_cloudwatch_log_group.this[0]: Refreshing state... [id=/aws/eks/conexus-dev-eks-PiXj0AhG/cluster]
module.eks.module.kms.data.aws_caller_identity.current: Read complete after 0s [id=957770628377]
module.eks.data.aws_caller_identity.current: Read complete after 0s [id=957770628377]
module.irsa-ebs-csi.data.aws_caller_identity.current: Read complete after 0s [id=957770628377]
module.eks.module.eks_managed_node_group["two"].data.aws_caller_identity.current: Read complete after 0s [id=957770628377]
module.bastion.data.aws_kms_alias.kms-ebs: Reading...
module.eks.module.eks_managed_node_group["one"].data.aws_caller_identity.current: Reading...
module.eks.module.eks_managed_node_group["one"].data.aws_partition.current: Reading...
module.vpc.aws_vpc.this[0]: Refreshing state... [id=vpc-06b7b0c3a2762dfc4]
data.aws_availability_zones.available: Read complete after 0s [id=us-east-1]
module.eks.module.eks_managed_node_group["one"].data.aws_partition.current: Read complete after 1s [id=aws]
module.bastion.aws_iam_role.bastion_host_role: Refreshing state... [id=terraform-20230720010035803900000001]
module.eks.module.kms.data.aws_partition.current: Reading...
module.eks.module.kms.data.aws_partition.current: Read complete after 0s [id=aws]
module.eks.data.aws_iam_session_context.current: Reading...
module.eks.data.aws_iam_session_context.current: Read complete after 0s [id=arn:aws:iam::957770628377:user/madhav.kundala]
module.eks.module.eks_managed_node_group["one"].data.aws_caller_identity.current: Read complete after 1s [id=957770628377]
module.eks.module.eks_managed_node_group["two"].data.aws_iam_policy_document.assume_role_policy[0]: Reading...
module.eks.module.eks_managed_node_group["one"].data.aws_iam_policy_document.assume_role_policy[0]: Reading...
module.eks.module.eks_managed_node_group["one"].data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2560088296]
module.eks.module.eks_managed_node_group["two"].data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2560088296]
module.book.data.aws_ami.amzn-linux-2023-ami: Reading...
module.eks.data.aws_iam_policy_document.assume_role_policy[0]: Reading...
module.eks.module.eks_managed_node_group["one"].aws_iam_role.this[0]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003]
module.eks.module.eks_managed_node_group["two"].aws_iam_role.this[0]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001]
module.eks.data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2764486067]
data.aws_iam_policy.ebs_csi_policy: Read complete after 1s [id=arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy]
module.eks.aws_iam_role.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002]
module.bastion.data.aws_kms_alias.kms-ebs: Read complete after 1s [id=arn:aws:kms:us-east-1:957770628377:alias/aws/ebs]
module.bastion.aws_kms_alias.alias: Refreshing state... [id=alias/sandbox_bastion_data]
module.bastion.aws_iam_instance_profile.bastion_host_profile: Refreshing state... [id=terraform-20230720010038858500000003]
module.book.data.aws_ami.amzn-linux-2023-ami: Read complete after 1s [id=ami-06ca3ca175f37dd66]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730850300000008]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730535800000005]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730758800000007]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730865300000009]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730490400000004]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730554800000006]
module.vpc.aws_default_security_group.this[0]: Refreshing state... [id=sg-0a2ed117fab7ce933]
module.vpc.aws_default_route_table.default[0]: Refreshing state... [id=rtb-0a37c83fd7c936c17]
module.vpc.aws_default_network_acl.this[0]: Refreshing state... [id=acl-08dbb543a6be803ef]
module.book.aws_security_group.instance: Refreshing state... [id=sg-011a532df1ae0dc37]
module.eks.aws_security_group.node[0]: Refreshing state... [id=sg-0ac07c7eb308b8ddc]
module.bastion.aws_lb_target_group.bastion_lb_target_group[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:targetgroup/bastion-lt-lb-target/fa113f30fd94413c]
module.eks.aws_security_group.cluster[0]: Refreshing state... [id=sg-0d3a3e3e96fd396a1]
module.vpc.aws_subnet.private[2]: Refreshing state... [id=subnet-0554efb8f0730ee7f]
module.vpc.aws_subnet.private[1]: Refreshing state... [id=subnet-08d8293285c14623e]
module.vpc.aws_subnet.private[0]: Refreshing state... [id=subnet-09cf72e6f9acc499f]
module.vpc.aws_route_table.public[0]: Refreshing state... [id=rtb-07fd0e3546bec53f0]
module.bastion.aws_security_group.private_instances_security_group: Refreshing state... [id=sg-0ec915aa6a1ada70c]
module.bastion.aws_security_group.bastion_host_security_group[0]: Refreshing state... [id=sg-0291851ad17e47bb9]
module.vpc.aws_route_table.private[0]: Refreshing state... [id=rtb-05773284301bcbc65]
module.vpc.aws_internet_gateway.this[0]: Refreshing state... [id=igw-0a7d040987e4e099e]
module.vpc.aws_subnet.public[0]: Refreshing state... [id=subnet-0d4df1cc1b29d0b5f]
module.vpc.aws_subnet.public[1]: Refreshing state... [id=subnet-0a4702a13f0a35ec0]
module.vpc.aws_subnet.public[2]: Refreshing state... [id=subnet-0fa87d8368e2ce745]
module.eks.aws_iam_role_policy_attachment.this["AmazonEKSClusterPolicy"]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119073107180000000b]
module.book.aws_instance.experiement: Refreshing state... [id=i-09677525c4911e930]
module.eks.aws_iam_role_policy_attachment.this["AmazonEKSVPCResourceController"]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119073098720000000a]
module.vpc.aws_route_table_association.private[2]: Refreshing state... [id=rtbassoc-077d88479534111bf]
module.vpc.aws_route_table_association.private[0]: Refreshing state... [id=rtbassoc-061c7d3659731cf00]
module.vpc.aws_route_table_association.private[1]: Refreshing state... [id=rtbassoc-01e0e32664c196191]
module.eks.aws_security_group_rule.cluster["ingress_nodes_443"]: Refreshing state... [id=sgrule-4209430522]
module.vpc.aws_eip.nat[0]: Refreshing state... [id=eipalloc-0f971a663bf23f055]
module.eks.aws_security_group_rule.node["ingress_cluster_8443_webhook"]: Refreshing state... [id=sgrule-3174298642]
module.vpc.aws_route.public_internet_gateway[0]: Refreshing state... [id=r-rtb-07fd0e3546bec53f01080289494]
module.eks.aws_security_group_rule.node["ingress_cluster_kubelet"]: Refreshing state... [id=sgrule-4038711744]
module.bastion.aws_security_group_rule.ingress_instances: Refreshing state... [id=sgrule-4145116239]
module.eks.aws_security_group_rule.node["ingress_self_coredns_udp"]: Refreshing state... [id=sgrule-1801540160]
module.eks.aws_security_group_rule.node["ingress_cluster_443"]: Refreshing state... [id=sgrule-3960963871]
module.eks.aws_security_group_rule.node["ingress_self_coredns_tcp"]: Refreshing state... [id=sgrule-3477008815]
module.eks.aws_security_group_rule.node["ingress_cluster_6443_webhook"]: Refreshing state... [id=sgrule-2926561331]
module.eks.aws_security_group_rule.node["ingress_nodes_ephemeral"]: Refreshing state... [id=sgrule-4251137344]
module.eks.aws_security_group_rule.node["ingress_cluster_4443_webhook"]: Refreshing state... [id=sgrule-1731047333]
module.eks.aws_security_group_rule.node["egress_all"]: Refreshing state... [id=sgrule-3851446332]
module.eks.module.kms.data.aws_iam_policy_document.this[0]: Reading...
module.eks.module.kms.data.aws_iam_policy_document.this[0]: Read complete after 0s [id=2715916501]
module.bastion.aws_security_group_rule.egress_bastion[0]: Refreshing state... [id=sgrule-3202349969]
module.eks.aws_security_group_rule.node["ingress_cluster_9443_webhook"]: Refreshing state... [id=sgrule-3650275289]
module.vpc.aws_route_table_association.public[2]: Refreshing state... [id=rtbassoc-011b0e843b092a57a]
module.vpc.aws_route_table_association.public[0]: Refreshing state... [id=rtbassoc-0011daca02b52c3fc]
module.vpc.aws_route_table_association.public[1]: Refreshing state... [id=rtbassoc-02cfde69e841a7ee4]
module.eks.module.kms.aws_kms_key.this[0]: Refreshing state... [id=c776a209-f781-4980-b507-6c02735b8a67]
module.bastion.data.aws_subnet.subnets[0]: Reading...
module.vpc.aws_nat_gateway.this[0]: Refreshing state... [id=nat-0b2743787ac173501]
module.bastion.data.aws_subnet.subnets[1]: Reading...
module.bastion.data.aws_subnet.subnets[2]: Reading...
module.bastion.aws_lb.bastion_lb[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:loadbalancer/net/bastion-lt-lb/c3c156de9c79cd2f]
module.bastion.data.aws_subnet.subnets[0]: Read complete after 0s [id=subnet-0d4df1cc1b29d0b5f]
module.bastion.data.aws_subnet.subnets[2]: Read complete after 0s [id=subnet-0fa87d8368e2ce745]
module.bastion.data.aws_subnet.subnets[1]: Read complete after 0s [id=subnet-0a4702a13f0a35ec0]
module.bastion.aws_security_group_rule.ingress_bastion[0]: Refreshing state... [id=sgrule-235100370]
module.vpc.aws_route.private_nat_gateway[0]: Refreshing state... [id=r-rtb-05773284301bcbc651080289494]
module.eks.aws_iam_policy.cluster_encryption[0]: Refreshing state... [id=arn:aws:iam::957770628377:policy/conexus-dev-eks-PiXj0AhG-cluster-ClusterEncryption2023051119075000300000000e]
module.eks.aws_eks_cluster.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG]
module.eks.module.kms.aws_kms_alias.this["cluster"]: Refreshing state... [id=alias/eks/conexus-dev-eks-PiXj0AhG]
module.bastion.aws_lb_listener.bastion_lb_listener_22[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:listener/net/bastion-lt-lb/c3c156de9c79cd2f/d2538939de46a466]
module.eks.aws_iam_role_policy_attachment.cluster_encryption[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119075083200000000f]
module.eks.time_sleep.this[0]: Refreshing state... [id=2023-07-20T01:01:05Z]
module.eks.data.tls_certificate.this[0]: Reading...
module.irsa-ebs-csi.data.aws_iam_policy_document.assume_role_with_oidc[0]: Reading...
module.irsa-ebs-csi.data.aws_iam_policy_document.assume_role_with_oidc[0]: Read complete after 0s [id=1487332657]
module.irsa-ebs-csi.aws_iam_role.this[0]: Refreshing state... [id=AmazonEKSTFEBSCSIRole-conexus-dev-eks-PiXj0AhG]
module.eks.module.eks_managed_node_group["two"].aws_launch_template.this[0]: Refreshing state... [id=lt-0950e32c15e19edf1]
module.eks.module.eks_managed_node_group["one"].aws_launch_template.this[0]: Refreshing state... [id=lt-0675273a2d89cfef5]
module.eks.module.eks_managed_node_group["one"].aws_eks_node_group.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:node-group-1-20230511191751616000000015]
module.eks.module.eks_managed_node_group["two"].aws_eks_node_group.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:node-group-2-20230511191751620900000017]
module.irsa-ebs-csi.aws_iam_role_policy_attachment.custom[0]: Refreshing state... [id=AmazonEKSTFEBSCSIRole-conexus-dev-eks-PiXj0AhG-2023051119175238380000001a]
aws_eks_addon.ebs-csi: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:aws-ebs-csi-driver]
module.eks.data.tls_certificate.this[0]: Read complete after 0s [id=5933588ce34e24e9fb40c3565fb0b5993639df67]
module.eks.aws_iam_openid_connect_provider.oidc_provider[0]: Refreshing state... [id=arn:aws:iam::957770628377:oidc-provider/oidc.eks.us-east-1.amazonaws.com/id/3CEFF85305278144674460CDFB2409A0]
module.bastion.data.aws_ami.amazon-linux-2: Read complete after 7s [id=ami-029eb80bc237bec6f]
module.bastion.aws_launch_template.bastion_launch_template: Refreshing state... [id=lt-0224eb2f71cb91e78]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply" which may have affected this plan:

  # module.eks.module.kms.aws_kms_key.this[0] has changed
  ~ resource "aws_kms_key" "this" {
        id                                 = "c776a209-f781-4980-b507-6c02735b8a67"
      ~ policy                             = jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = "arn:aws:iam::957770628377:user/madhav.kundala" -> [
                              + "arn:aws:iam::957770628377:user/oscluster",
                              + "arn:aws:iam::957770628377:user/madhav.kundala",
                            ]
                        }
                        # (4 unchanged attributes hidden)
                    },
                  ~ {
                      ~ Action    = [
                            # (4 unchanged elements hidden)
                            "kms:Decrypt",
                          + "kms:Get*",
                          + "kms:List*",
                        ]
                      ~ Principal = {
                          ~ AWS = "arn:aws:iam::957770628377:role/conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002" -> [
                              + "arn:aws:iam::957770628377:role/conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002",
                              + "arn:aws:iam::957770628377:user/madhav.kundala",
                            ]
                        }
                        # (3 unchanged attributes hidden)
                    },
                ]
                # (1 unchanged attribute hidden)
            }
        )
        tags                               = {}
        # (10 unchanged attributes hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may
include actions to undo or respond to these changes.

───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # module.bastion.data.aws_iam_policy_document.bastion_host_policy_document will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "bastion_host_policy_document" {
      + id   = (known after apply)
      + json = (known after apply)

      + statement {
          + actions   = [
              + "s3:PutObject",
              + "s3:PutObjectAcl",
            ]
          + resources = [
              + (known after apply),
            ]
        }
      + statement {
          + actions   = [
              + "s3:GetObject",
            ]
          + resources = [
              + (known after apply),
            ]
        }
      + statement {
          + actions   = [
              + "s3:ListBucket",
            ]
          + resources = [
              + (known after apply),
            ]

          + condition {
              + test     = "ForAnyValue:StringEquals"
              + values   = [
                  + "public-keys/",
                ]
              + variable = "s3:prefix"
            }
        }
      + statement {
          + actions   = [
              + "kms:Decrypt",
              + "kms:Encrypt",
            ]
          + resources = [
              + "arn:aws:kms:us-east-1:957770628377:key/3de77e16-6bf1-4583-a4fd-7f963554cbf8",
            ]
        }
    }

  # module.bastion.aws_autoscaling_group.bastion_auto_scaling_group will be created
  + resource "aws_autoscaling_group" "bastion_auto_scaling_group" {
      + arn                       = (known after apply)
      + availability_zones        = (known after apply)
      + default_cooldown          = 180
      + desired_capacity          = 1
      + force_delete              = false
      + force_delete_warm_pool    = false
      + health_check_grace_period = 180
      + health_check_type         = "EC2"
      + id                        = (known after apply)
      + load_balancers            = (known after apply)
      + max_size                  = 1
      + metrics_granularity       = "1Minute"
      + min_size                  = 1
      + name                      = (known after apply)
      + name_prefix               = "ASG-bastion-lt"
      + predicted_capacity        = (known after apply)
      + protect_from_scale_in     = false
      + service_linked_role_arn   = (known after apply)
      + target_group_arns         = [
          + "arn:aws:elasticloadbalancing:us-east-1:957770628377:targetgroup/bastion-lt-lb-target/fa113f30fd94413c",
        ]
      + termination_policies      = [
          + "OldestLaunchConfiguration",
        ]
      + vpc_zone_identifier       = [
          + "subnet-0a4702a13f0a35ec0",
          + "subnet-0d4df1cc1b29d0b5f",
          + "subnet-0fa87d8368e2ce745",
        ]
      + wait_for_capacity_timeout = "10m"
      + warm_pool_size            = (known after apply)

      + instance_refresh {
          + strategy = "Rolling"
        }

      + launch_template {
          + id      = "lt-0224eb2f71cb91e78"
          + name    = (known after apply)
          + version = (known after apply)
        }

      + tag {
          + key                 = "Name"
          + propagate_at_launch = true
          + value               = "ASG-bastion-lt"
        }
      + tag {
          + key                 = "description"
          + propagate_at_launch = true
          + value               = "Bastion host for sandbox environment"
        }
      + tag {
          + key                 = "name"
          + propagate_at_launch = true
          + value               = "sandbox_bastion_name"
        }
    }

  # module.bastion.aws_iam_policy.bastion_host_policy will be created
  + resource "aws_iam_policy" "bastion_host_policy" {
      + arn         = (known after apply)
      + id          = (known after apply)
      + name        = "SandboxBastionHostPolicy"
      + name_prefix = (known after apply)
      + path        = "/"
      + policy      = (known after apply)
      + policy_id   = (known after apply)
      + tags_all    = (known after apply)
    }

  # module.bastion.aws_iam_role_policy_attachment.bastion_host will be created
  + resource "aws_iam_role_policy_attachment" "bastion_host" {
      + id         = (known after apply)
      + policy_arn = (known after apply)
      + role       = "terraform-20230720010035803900000001"
    }

  # module.bastion.aws_kms_alias.alias must be replaced
-/+ resource "aws_kms_alias" "alias" {
      ~ arn            = "arn:aws:kms:us-east-1:957770628377:alias/sandbox_bastion_data" -> (known after apply)
      ~ id             = "alias/sandbox_bastion_data" -> (known after apply)
      ~ name           = "alias/sandbox_bastion_data" -> "alias/sandbox-bastion-data" # forces replacement
      + name_prefix    = (known after apply)
      ~ target_key_arn = "arn:aws:kms:us-east-1:957770628377:key/3de77e16-6bf1-4583-a4fd-7f963554cbf8" -> (known after apply)
      ~ target_key_id  = "3de77e16-6bf1-4583-a4fd-7f963554cbf8" -> "arn:aws:kms:us-east-1:957770628377:key/3de77e16-6bf1-4583-a4fd-7f963554cbf8"
    }

  # module.bastion.aws_launch_template.bastion_launch_template will be updated in-place
  ~ resource "aws_launch_template" "bastion_launch_template" {
      ~ default_version         = 1 -> (known after apply)
        id                      = "lt-0224eb2f71cb91e78"
      ~ latest_version          = 1 -> (known after apply)
        name                    = "bastion-lt20230720010039777900000004"
        tags                    = {}
      ~ user_data               = "IyEvYmluL2Jhc2ggLXgKeXVtIC15IHVwZGF0ZSAtLXNlY3VyaXR5CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBFTkFCTEUgU1NIIFJFQ09SRElORyAjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBDcmVhdGUgYSBuZXcgZm9sZGVyIGZvciB0aGUgbG9nIGZpbGVzCm1rZGlyIC92YXIvbG9nL2Jhc3Rpb24KCiMgQWxsb3cgZWMyLXVzZXIgb25seSB0byBhY2Nlc3MgdGhpcyBmb2xkZXIgYW5kIGl0cyBjb250ZW50CmNob3duIGVjMi11c2VyOmVjMi11c2VyIC92YXIvbG9nL2Jhc3Rpb24KY2htb2QgLVIgNzcwIC92YXIvbG9nL2Jhc3Rpb24Kc2V0ZmFjbCAtUmRtIG90aGVyOjAgL3Zhci9sb2cvYmFzdGlvbgoKIyBVcGRhdGUgc3NoZCBkZWZhdWx0IHBvcnQgdG8gcHVibGljX3NzaF9wb3J0CnNlZCAtaSAicy8jUG9ydCAyMi9Qb3J0IDIyL2ciIC9ldGMvc3NoL3NzaGRfY29uZmlnCgojIE1ha2UgT3BlblNTSCBleGVjdXRlIGEgY3VzdG9tIHNjcmlwdCBvbiBsb2dpbnMKZWNobyAtZSAiXFxuRm9yY2VDb21tYW5kIC91c3IvYmluL2Jhc3Rpb24vc2hlbGwiID4+IC9ldGMvc3NoL3NzaGRfY29uZmlnCgojIEJsb2NrIHNvbWUgU1NIIGZlYXR1cmVzIHRoYXQgYmFzdGlvbiBob3N0IHVzZXJzIGNvdWxkIHVzZSB0byBjaXJjdW12ZW50IHRoZSBzb2x1dGlvbgphd2sgJyEvWDExRm9yd2FyZGluZy8nIC9ldGMvc3NoL3NzaGRfY29uZmlnID4gdGVtcCAmJiBtdiB0ZW1wIC9ldGMvc3NoL3NzaGRfY29uZmlnCmVjaG8gIlgxMUZvcndhcmRpbmcgbm8iID4+IC9ldGMvc3NoL3NzaGRfY29uZmlnCgpta2RpciAvdXNyL2Jpbi9iYXN0aW9uCgpjYXQgPiAvdXNyL2Jpbi9iYXN0aW9uL3NoZWxsIDw8ICdFT0YnCgojIENoZWNrIHRoYXQgdGhlIFNTSCBjbGllbnQgZGlkIG5vdCBzdXBwbHkgYSBjb21tYW5kCmlmIFtbIC16ICRTU0hfT1JJR0lOQUxfQ09NTUFORCBdXTsgdGhlbgoKICAjIFRoZSBmb3JtYXQgb2YgbG9nIGZpbGVzIGlzIC92YXIvbG9nL2Jhc3Rpb24vWVlZWS1NTS1ERF9ISC1NTS1TU191c2VyCiAgTE9HX0ZJTEU9ImBkYXRlIC0tZGF0ZT0idG9kYXkiICIrJVktJW0tJWRfJUgtJU0tJVMiYF9gd2hvYW1pYCIKICBMT0dfRElSPSIvdmFyL2xvZy9iYXN0aW9uLyIKCiAgIyBQcmludCBhIHdlbGNvbWUgbWVzc2FnZQogIGVjaG8gIiIKICBlY2hvICJOT1RFOiBUaGlzIFNTSCBzZXNzaW9uIHdpbGwgYmUgcmVjb3JkZWQiCiAgZWNobyAiQVVESVQgS0VZOiAkTE9HX0ZJTEUiCiAgZWNobyAiIgoKICAjIEkgc3VmZml4IHRoZSBsb2cgZmlsZSBuYW1lIHdpdGggYSByYW5kb20gc3RyaW5nLiBJIGV4cGxhaW4gd2h5IGxhdGVyIG9uLgogIFNVRkZJWD1gbWt0ZW1wIC11IF9YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWGAKCiAgIyBXcmFwIGFuIGludGVyYWN0aXZlIHNoZWxsIGludG8gInNjcmlwdCIgdG8gcmVjb3JkIHRoZSBTU0ggc2Vzc2lvbgogIHNjcmlwdCAtcWYgLS10aW1pbmc9JExPR19ESVIkTE9HX0ZJTEUkU1VGRklYLnRpbWUgJExPR19ESVIkTE9HX0ZJTEUkU1VGRklYLmRhdGEgLS1jb21tYW5kPS9iaW4vYmFzaAoKZWxzZQoKICAjIElmIHRoZSBtb2R1bGUgY29uc3VtZXIgd2FudHMgdG8gYWxsb3cgcmVtb3RlIGNvbW1hbmRzIChmb3IgYW5zaWJsZSBvciBvdGhlcikgdGhlbiBhbGxvdyB0aGF0IGNvbW1hbmQgdGhyb3VnaC4KICBpZiBbICJmYWxzZSIgPT0gInRydWUiIF07IHRoZW4KICAgIGV4ZWMgL2Jpbi9iYXNoIC1jICIkU1NIX09SSUdJTkFMX0NPTU1BTkQiCiAgZWxzZQogICAgIyBUaGUgInNjcmlwdCIgcHJvZ3JhbSBjb3VsZCBiZSBjaXJjdW12ZW50ZWQgd2l0aCBzb21lIGNvbW1hbmRzIChlLmcuIGJhc2gsIG5jKS4KICAgICMgVGhlcmVmb3JlLCBJIGludGVudGlvbmFsbHkgcHJldmVudCB1c2VycyBmcm9tIHN1cHBseWluZyBjb21tYW5kcy4KCiAgICBlY2hvICJUaGlzIGJhc3Rpb24gc3VwcG9ydHMgaW50ZXJhY3RpdmUgc2Vzc2lvbnMgb25seS4gRG8gbm90IHN1cHBseSBhIGNvbW1hbmQiCiAgICBleGl0IDEKICBmaQpmaQoKRU9GCgojIE1ha2UgdGhlIGN1c3RvbSBzY3JpcHQgZXhlY3V0YWJsZQpjaG1vZCBhK3ggL3Vzci9iaW4vYmFzdGlvbi9zaGVsbAoKIyBCYXN0aW9uIGhvc3QgdXNlcnMgY291bGQgb3ZlcndyaXRlIGFuZCB0YW1wZXIgd2l0aCBhbiBleGlzdGluZyBsb2cgZmlsZSB1c2luZyAic2NyaXB0IiBpZgojIHRoZXkga25ldyB0aGUgZXhhY3QgZmlsZSBuYW1lLiBJIHRha2Ugc2V2ZXJhbCBtZWFzdXJlcyB0byBvYmZ1c2NhdGUgdGhlIGZpbGUgbmFtZToKIyAxLiBBZGQgYSByYW5kb20gc3VmZml4IHRvIHRoZSBsb2cgZmlsZSBuYW1lLgojIDIuIFByZXZlbnQgYmFzdGlvbiBob3N0IHVzZXJzIGZyb20gbGlzdGluZyB0aGUgZm9sZGVyIGNvbnRhaW5pbmcgbG9nIGZpbGVzLiBUaGlzIGlzIGRvbmUKIyAgICBieSBjaGFuZ2luZyB0aGUgZ3JvdXAgb3duZXIgb2YgInNjcmlwdCIgYW5kIHNldHRpbmcgR0lELgpjaG93biByb290OmVjMi11c2VyIC91c3IvYmluL3NjcmlwdApjaG1vZCBnK3MgL3Vzci9iaW4vc2NyaXB0CgojIDMuIFByZXZlbnQgYmFzdGlvbiBob3N0IHVzZXJzIGZyb20gdmlld2luZyBwcm9jZXNzZXMgb3duZWQgYnkgb3RoZXIgdXNlcnMsIGJlY2F1c2UgdGhlIGxvZwojICAgIGZpbGUgbmFtZSBpcyBvbmUgb2YgdGhlICJzY3JpcHQiIGV4ZWN1dGlvbiBwYXJhbWV0ZXJzLgptb3VudCAtbyByZW1vdW50LHJ3LGhpZGVwaWQ9MiAvcHJvYwphd2sgJyEvcHJvYy8nIC9ldGMvZnN0YWIgPiB0ZW1wICYmIG12IHRlbXAgL2V0Yy9mc3RhYgplY2hvICJwcm9jIC9wcm9jIHByb2MgZGVmYXVsdHMsaGlkZXBpZD0yIDAgMCIgPj4gL2V0Yy9mc3RhYgoKIyBSZXN0YXJ0IHRoZSBTU0ggc2VydmljZSB0byBhcHBseSAvZXRjL3NzaC9zc2hkX2NvbmZpZyBtb2RpZmljYXRpb25zLgpzZXJ2aWNlIHNzaGQgcmVzdGFydAoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBFWFBPUlQgTE9HIEZJTEVTIFRPIFMzICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNhdCA+IC91c3IvYmluL2Jhc3Rpb24vc3luY19zMyA8PCAnRU9GJwojIS91c3IvYmluL2VudiBiYXNoCgojIENvcHkgbG9nIGZpbGVzIHRvIFMzIHdpdGggc2VydmVyLXNpZGUgZW5jcnlwdGlvbiBlbmFibGVkLgojIFRoZW4sIGlmIHN1Y2Nlc3NmdWwsIGRlbGV0ZSBsb2cgZmlsZXMgdGhhdCBhcmUgb2xkZXIgdGhhbiBhIGRheS4KTE9HX0RJUj0iL3Zhci9sb2cvYmFzdGlvbi8iCmF3cyBzMyBjcCAkTE9HX0RJUiBzMzovL3NhbmRib3hfYmFzdGlvbl9kYXRhL2xvZ3MvIC0tc3NlIC0tcmVnaW9uIHVzLWVhc3QtMSAtLXJlY3Vyc2l2ZSAmJiBmaW5kICRMT0dfRElSKiAtbXRpbWUgKzEgLWV4ZWMgcm0ge30gXDsKCkVPRgoKY2htb2QgNzAwIC91c3IvYmluL2Jhc3Rpb24vc3luY19zMwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIFNZTkNIUk9OSVpFIFVTRVJTIEFORCBQVUJMSUMgS0VZUyAjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgQmFzdGlvbiBob3N0IHVzZXJzIHNob3VsZCBsb2cgaW4gdG8gdGhlIGJhc3Rpb24gaG9zdCB3aXRoIHRoZWlyIHBlcnNvbmFsIFNTSCBrZXkgcGFpci4KIyBUaGUgcHVibGljIGtleXMgYXJlIHN0b3JlZCBvbiBTMyB3aXRoIHRoZSBmb2xsb3dpbmcgbmFtaW5nIGNvbnZlbnRpb246ICJ1c2VybmFtZS5wdWIiLgojIFRoaXMgc2NyaXB0IHJldHJpZXZlcyB0aGUgcHVibGljIGtleXMsIGNyZWF0ZXMgb3IgZGVsZXRlcyBsb2NhbCB1c2VyIGFjY291bnRzIGFzIG5lZWRlZCwKIyBhbmQgY29waWVzIHRoZSBwdWJsaWMga2V5IHRvIC9ob21lL3VzZXJuYW1lLy5zc2gvYXV0aG9yaXplZF9rZXlzCgpjYXQgPiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMgPDwgJ0VPRicKIyEvdXNyL2Jpbi9lbnYgYmFzaAoKIyBUaGUgZmlsZSB3aWxsIGxvZyB1c2VyIGNoYW5nZXMKTE9HX0ZJTEU9Ii92YXIvbG9nL2Jhc3Rpb24vdXNlcnNfY2hhbmdlbG9nLnR4dCIKCiMgVGhlIGZ1bmN0aW9uIHJldHVybnMgdGhlIHVzZXIgbmFtZSBmcm9tIHRoZSBwdWJsaWMga2V5IGZpbGUgbmFtZS4KIyBFeGFtcGxlOiBwdWJsaWMta2V5cy9zc2h1c2VyLnB1YiA9PiBzc2h1c2VyCmdldF91c2VyX25hbWUgKCkgewogIGVjaG8gIiQxIiB8IHNlZCAtZSAicy8uKlwvLy9nIiB8IHNlZCAtZSAicy9cLnB1Yi8vZyIKfQoKIyBGb3IgZWFjaCBwdWJsaWMga2V5IGF2YWlsYWJsZSBpbiB0aGUgUzMgYnVja2V0CmF3cyBzM2FwaSBsaXN0LW9iamVjdHMgLS1idWNrZXQgc2FuZGJveF9iYXN0aW9uX2RhdGEgLS1wcmVmaXggcHVibGljLWtleXMvIC0tcmVnaW9uIHVzLWVhc3QtMSAtLW91dHB1dCB0ZXh0IC0tcXVlcnkgJ0NvbnRlbnRzWz9TaXplPmAwYF0uS2V5JyB8IHRyICdcdCcgJ1xuJyA+IH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMwp3aGlsZSByZWFkIGxpbmU7IGRvCiAgVVNFUl9OQU1FPSJgZ2V0X3VzZXJfbmFtZSAiJGxpbmUiYCIKCiAgIyBNYWtlIHN1cmUgdGhlIHVzZXIgbmFtZSBpcyBhbHBoYW51bWVyaWMKICBpZiBbWyAiJFVTRVJfTkFNRSIgPX4gXlthLXpdWy1hLXowLTldKiQgXV07IHRoZW4KCiAgICAjIENyZWF0ZSBhIHVzZXIgYWNjb3VudCBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0CiAgICBjdXQgLWQ6IC1mMSAvZXRjL3Bhc3N3ZCB8IGdyZXAgLXF4ICRVU0VSX05BTUUKICAgIGlmIFsgJD8gLWVxIDEgXTsgdGhlbgogICAgICAvdXNyL3NiaW4vYWRkdXNlciAkVVNFUl9OQU1FICYmIFwKICAgICAgbWtkaXIgLW0gNzAwIC9ob21lLyRVU0VSX05BTUUvLnNzaCAmJiBcCiAgICAgIGNob3duICRVU0VSX05BTUU6JFVTRVJfTkFNRSAvaG9tZS8kVVNFUl9OQU1FLy5zc2ggJiYgXAogICAgICBlY2hvICIkbGluZSIgPj4gfi9rZXlzX2luc3RhbGxlZCAmJiBcCiAgICAgIGVjaG8gImBkYXRlIC0tZGF0ZT0idG9kYXkiICIrJVktJW0tJWQgJUgtJU0tJVMiYDogQ3JlYXRpbmcgdXNlciBhY2NvdW50IGZvciAkVVNFUl9OQU1FICgkbGluZSkiID4+ICRMT0dfRklMRQogICAgZmkKCiAgICAjIENvcHkgdGhlIHB1YmxpYyBrZXkgZnJvbSBTMywgaWYgYW4gdXNlciBhY2NvdW50IHdhcyBjcmVhdGVkIGZyb20gdGhpcyBrZXkKICAgIGlmIFsgLWYgfi9rZXlzX2luc3RhbGxlZCBdOyB0aGVuCiAgICAgIGdyZXAgLXF4ICIkbGluZSIgfi9rZXlzX2luc3RhbGxlZAogICAgICBpZiBbICQ/IC1lcSAwIF07IHRoZW4KICAgICAgICBhd3MgczMgY3AgczM6Ly9zYW5kYm94X2Jhc3Rpb25fZGF0YS8kbGluZSAvaG9tZS8kVVNFUl9OQU1FLy5zc2gvYXV0aG9yaXplZF9rZXlzIC0tcmVnaW9uIHVzLWVhc3QtMQogICAgICAgIGNobW9kIDYwMCAvaG9tZS8kVVNFUl9OQU1FLy5zc2gvYXV0aG9yaXplZF9rZXlzCiAgICAgICAgY2hvd24gJFVTRVJfTkFNRTokVVNFUl9OQU1FIC9ob21lLyRVU0VSX05BTUUvLnNzaC9hdXRob3JpemVkX2tleXMKICAgICAgZmkKICAgIGZpCgogIGZpCmRvbmUgPCB+L2tleXNfcmV0cmlldmVkX2Zyb21fczMKCiMgUmVtb3ZlIHVzZXIgYWNjb3VudHMgd2hvc2UgcHVibGljIGtleSB3YXMgZGVsZXRlZCBmcm9tIFMzCmlmIFsgLWYgfi9rZXlzX2luc3RhbGxlZCBdOyB0aGVuCiAgc29ydCAtdW8gfi9rZXlzX2luc3RhbGxlZCB+L2tleXNfaW5zdGFsbGVkCiAgc29ydCAtdW8gfi9rZXlzX3JldHJpZXZlZF9mcm9tX3MzIH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMwogIGNvbW0gLTEzIH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMyB+L2tleXNfaW5zdGFsbGVkIHwgc2VkICJzL1x0Ly9nIiA+IH4va2V5c190b19yZW1vdmUKICB3aGlsZSByZWFkIGxpbmU7IGRvCiAgICBVU0VSX05BTUU9ImBnZXRfdXNlcl9uYW1lICIkbGluZSJgIgogICAgZWNobyAiYGRhdGUgLS1kYXRlPSJ0b2RheSIgIislWS0lbS0lZCAlSC0lTS0lUyJgOiBSZW1vdmluZyB1c2VyIGFjY291bnQgZm9yICRVU0VSX05BTUUgKCRsaW5lKSIgPj4gJExPR19GSUxFCiAgICAvdXNyL3NiaW4vdXNlcmRlbCAtciAtZiAkVVNFUl9OQU1FCiAgZG9uZSA8IH4va2V5c190b19yZW1vdmUKICBjb21tIC0zIH4va2V5c19pbnN0YWxsZWQgfi9rZXlzX3RvX3JlbW92ZSB8IHNlZCAicy9cdC8vZyIgPiB+L3RtcCAmJiBtdiB+L3RtcCB+L2tleXNfaW5zdGFsbGVkCmZpCgpFT0YKCmNobW9kIDcwMCAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBJTlNUQUxMIFNFQ1VSSVRZIFVQREFURVMgIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIFNlY3VyaXR5IHVwZGF0ZXMgYXJlIGluc3RhbGxlZCBieSB5dW0uIElmIHNjcmlwdCBpcyB1cGRhdGVkIChwYWNrYWdlIHV0aWwtbGludXgpCiMgdGhlbiB0aGUgc2V0dWlkIGJpdCBuZWVkcyB0byBiZSByZWNvdmVyZWQuIE90aGVyd2lzZSBjbGllbnRzIGNhbiBub3QgbG9naW5nLgoKY2F0ID4gL3Vzci9iaW4vYmFzdGlvbi95dW1fdXBkYXRlIDw8ICdFT0YnCiMhL3Vzci9iaW4vZW52IGJhc2gKCnl1bSAteSB1cGRhdGUgLS1zZWN1cml0eQoKY2hvd24gcm9vdDplYzItdXNlciAvdXNyL2Jpbi9zY3JpcHQKY2htb2QgZytzIC91c3IvYmluL3NjcmlwdAoKRU9GCgpjaG1vZCA3MDAgL3Vzci9iaW4vYmFzdGlvbi95dW1fdXBkYXRlCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBTQ0hFRFVMRSBTQ1JJUFRTIEFORCBTRUNVUklUWSBVUERBVEVTICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNhdCA+IH4vbXljcm9uIDw8IEVPRgoqLzUgKiAqICogKiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMKMCAwICogKiAqIC91c3IvYmluL2Jhc3Rpb24veXVtX3VwZGF0ZQoqLzUgKiAqICogKiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfczMKRU9GCmNyb250YWIgfi9teWNyb24Kcm0gfi9teWNyb24KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBBZGQgQ3VzdG9tIGV4dHJhX3VzZXJfZGF0YV9jb250ZW50ICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCg==" -> "IyEvYmluL2Jhc2ggLXgKeXVtIC15IHVwZGF0ZSAtLXNlY3VyaXR5CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBFTkFCTEUgU1NIIFJFQ09SRElORyAjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBDcmVhdGUgYSBuZXcgZm9sZGVyIGZvciB0aGUgbG9nIGZpbGVzCm1rZGlyIC92YXIvbG9nL2Jhc3Rpb24KCiMgQWxsb3cgZWMyLXVzZXIgb25seSB0byBhY2Nlc3MgdGhpcyBmb2xkZXIgYW5kIGl0cyBjb250ZW50CmNob3duIGVjMi11c2VyOmVjMi11c2VyIC92YXIvbG9nL2Jhc3Rpb24KY2htb2QgLVIgNzcwIC92YXIvbG9nL2Jhc3Rpb24Kc2V0ZmFjbCAtUmRtIG90aGVyOjAgL3Zhci9sb2cvYmFzdGlvbgoKIyBVcGRhdGUgc3NoZCBkZWZhdWx0IHBvcnQgdG8gcHVibGljX3NzaF9wb3J0CnNlZCAtaSAicy8jUG9ydCAyMi9Qb3J0IDIyL2ciIC9ldGMvc3NoL3NzaGRfY29uZmlnCgojIE1ha2UgT3BlblNTSCBleGVjdXRlIGEgY3VzdG9tIHNjcmlwdCBvbiBsb2dpbnMKZWNobyAtZSAiXFxuRm9yY2VDb21tYW5kIC91c3IvYmluL2Jhc3Rpb24vc2hlbGwiID4+IC9ldGMvc3NoL3NzaGRfY29uZmlnCgojIEJsb2NrIHNvbWUgU1NIIGZlYXR1cmVzIHRoYXQgYmFzdGlvbiBob3N0IHVzZXJzIGNvdWxkIHVzZSB0byBjaXJjdW12ZW50IHRoZSBzb2x1dGlvbgphd2sgJyEvWDExRm9yd2FyZGluZy8nIC9ldGMvc3NoL3NzaGRfY29uZmlnID4gdGVtcCAmJiBtdiB0ZW1wIC9ldGMvc3NoL3NzaGRfY29uZmlnCmVjaG8gIlgxMUZvcndhcmRpbmcgbm8iID4+IC9ldGMvc3NoL3NzaGRfY29uZmlnCgpta2RpciAvdXNyL2Jpbi9iYXN0aW9uCgpjYXQgPiAvdXNyL2Jpbi9iYXN0aW9uL3NoZWxsIDw8ICdFT0YnCgojIENoZWNrIHRoYXQgdGhlIFNTSCBjbGllbnQgZGlkIG5vdCBzdXBwbHkgYSBjb21tYW5kCmlmIFtbIC16ICRTU0hfT1JJR0lOQUxfQ09NTUFORCBdXTsgdGhlbgoKICAjIFRoZSBmb3JtYXQgb2YgbG9nIGZpbGVzIGlzIC92YXIvbG9nL2Jhc3Rpb24vWVlZWS1NTS1ERF9ISC1NTS1TU191c2VyCiAgTE9HX0ZJTEU9ImBkYXRlIC0tZGF0ZT0idG9kYXkiICIrJVktJW0tJWRfJUgtJU0tJVMiYF9gd2hvYW1pYCIKICBMT0dfRElSPSIvdmFyL2xvZy9iYXN0aW9uLyIKCiAgIyBQcmludCBhIHdlbGNvbWUgbWVzc2FnZQogIGVjaG8gIiIKICBlY2hvICJOT1RFOiBUaGlzIFNTSCBzZXNzaW9uIHdpbGwgYmUgcmVjb3JkZWQiCiAgZWNobyAiQVVESVQgS0VZOiAkTE9HX0ZJTEUiCiAgZWNobyAiIgoKICAjIEkgc3VmZml4IHRoZSBsb2cgZmlsZSBuYW1lIHdpdGggYSByYW5kb20gc3RyaW5nLiBJIGV4cGxhaW4gd2h5IGxhdGVyIG9uLgogIFNVRkZJWD1gbWt0ZW1wIC11IF9YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWGAKCiAgIyBXcmFwIGFuIGludGVyYWN0aXZlIHNoZWxsIGludG8gInNjcmlwdCIgdG8gcmVjb3JkIHRoZSBTU0ggc2Vzc2lvbgogIHNjcmlwdCAtcWYgLS10aW1pbmc9JExPR19ESVIkTE9HX0ZJTEUkU1VGRklYLnRpbWUgJExPR19ESVIkTE9HX0ZJTEUkU1VGRklYLmRhdGEgLS1jb21tYW5kPS9iaW4vYmFzaAoKZWxzZQoKICAjIElmIHRoZSBtb2R1bGUgY29uc3VtZXIgd2FudHMgdG8gYWxsb3cgcmVtb3RlIGNvbW1hbmRzIChmb3IgYW5zaWJsZSBvciBvdGhlcikgdGhlbiBhbGxvdyB0aGF0IGNvbW1hbmQgdGhyb3VnaC4KICBpZiBbICJmYWxzZSIgPT0gInRydWUiIF07IHRoZW4KICAgIGV4ZWMgL2Jpbi9iYXNoIC1jICIkU1NIX09SSUdJTkFMX0NPTU1BTkQiCiAgZWxzZQogICAgIyBUaGUgInNjcmlwdCIgcHJvZ3JhbSBjb3VsZCBiZSBjaXJjdW12ZW50ZWQgd2l0aCBzb21lIGNvbW1hbmRzIChlLmcuIGJhc2gsIG5jKS4KICAgICMgVGhlcmVmb3JlLCBJIGludGVudGlvbmFsbHkgcHJldmVudCB1c2VycyBmcm9tIHN1cHBseWluZyBjb21tYW5kcy4KCiAgICBlY2hvICJUaGlzIGJhc3Rpb24gc3VwcG9ydHMgaW50ZXJhY3RpdmUgc2Vzc2lvbnMgb25seS4gRG8gbm90IHN1cHBseSBhIGNvbW1hbmQiCiAgICBleGl0IDEKICBmaQpmaQoKRU9GCgojIE1ha2UgdGhlIGN1c3RvbSBzY3JpcHQgZXhlY3V0YWJsZQpjaG1vZCBhK3ggL3Vzci9iaW4vYmFzdGlvbi9zaGVsbAoKIyBCYXN0aW9uIGhvc3QgdXNlcnMgY291bGQgb3ZlcndyaXRlIGFuZCB0YW1wZXIgd2l0aCBhbiBleGlzdGluZyBsb2cgZmlsZSB1c2luZyAic2NyaXB0IiBpZgojIHRoZXkga25ldyB0aGUgZXhhY3QgZmlsZSBuYW1lLiBJIHRha2Ugc2V2ZXJhbCBtZWFzdXJlcyB0byBvYmZ1c2NhdGUgdGhlIGZpbGUgbmFtZToKIyAxLiBBZGQgYSByYW5kb20gc3VmZml4IHRvIHRoZSBsb2cgZmlsZSBuYW1lLgojIDIuIFByZXZlbnQgYmFzdGlvbiBob3N0IHVzZXJzIGZyb20gbGlzdGluZyB0aGUgZm9sZGVyIGNvbnRhaW5pbmcgbG9nIGZpbGVzLiBUaGlzIGlzIGRvbmUKIyAgICBieSBjaGFuZ2luZyB0aGUgZ3JvdXAgb3duZXIgb2YgInNjcmlwdCIgYW5kIHNldHRpbmcgR0lELgpjaG93biByb290OmVjMi11c2VyIC91c3IvYmluL3NjcmlwdApjaG1vZCBnK3MgL3Vzci9iaW4vc2NyaXB0CgojIDMuIFByZXZlbnQgYmFzdGlvbiBob3N0IHVzZXJzIGZyb20gdmlld2luZyBwcm9jZXNzZXMgb3duZWQgYnkgb3RoZXIgdXNlcnMsIGJlY2F1c2UgdGhlIGxvZwojICAgIGZpbGUgbmFtZSBpcyBvbmUgb2YgdGhlICJzY3JpcHQiIGV4ZWN1dGlvbiBwYXJhbWV0ZXJzLgptb3VudCAtbyByZW1vdW50LHJ3LGhpZGVwaWQ9MiAvcHJvYwphd2sgJyEvcHJvYy8nIC9ldGMvZnN0YWIgPiB0ZW1wICYmIG12IHRlbXAgL2V0Yy9mc3RhYgplY2hvICJwcm9jIC9wcm9jIHByb2MgZGVmYXVsdHMsaGlkZXBpZD0yIDAgMCIgPj4gL2V0Yy9mc3RhYgoKIyBSZXN0YXJ0IHRoZSBTU0ggc2VydmljZSB0byBhcHBseSAvZXRjL3NzaC9zc2hkX2NvbmZpZyBtb2RpZmljYXRpb25zLgpzZXJ2aWNlIHNzaGQgcmVzdGFydAoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBFWFBPUlQgTE9HIEZJTEVTIFRPIFMzICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNhdCA+IC91c3IvYmluL2Jhc3Rpb24vc3luY19zMyA8PCAnRU9GJwojIS91c3IvYmluL2VudiBiYXNoCgojIENvcHkgbG9nIGZpbGVzIHRvIFMzIHdpdGggc2VydmVyLXNpZGUgZW5jcnlwdGlvbiBlbmFibGVkLgojIFRoZW4sIGlmIHN1Y2Nlc3NmdWwsIGRlbGV0ZSBsb2cgZmlsZXMgdGhhdCBhcmUgb2xkZXIgdGhhbiBhIGRheS4KTE9HX0RJUj0iL3Zhci9sb2cvYmFzdGlvbi8iCmF3cyBzMyBjcCAkTE9HX0RJUiBzMzovL3NhbmRib3gtYmFzdGlvbi1kYXRhL2xvZ3MvIC0tc3NlIC0tcmVnaW9uIHVzLWVhc3QtMSAtLXJlY3Vyc2l2ZSAmJiBmaW5kICRMT0dfRElSKiAtbXRpbWUgKzEgLWV4ZWMgcm0ge30gXDsKCkVPRgoKY2htb2QgNzAwIC91c3IvYmluL2Jhc3Rpb24vc3luY19zMwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIFNZTkNIUk9OSVpFIFVTRVJTIEFORCBQVUJMSUMgS0VZUyAjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgQmFzdGlvbiBob3N0IHVzZXJzIHNob3VsZCBsb2cgaW4gdG8gdGhlIGJhc3Rpb24gaG9zdCB3aXRoIHRoZWlyIHBlcnNvbmFsIFNTSCBrZXkgcGFpci4KIyBUaGUgcHVibGljIGtleXMgYXJlIHN0b3JlZCBvbiBTMyB3aXRoIHRoZSBmb2xsb3dpbmcgbmFtaW5nIGNvbnZlbnRpb246ICJ1c2VybmFtZS5wdWIiLgojIFRoaXMgc2NyaXB0IHJldHJpZXZlcyB0aGUgcHVibGljIGtleXMsIGNyZWF0ZXMgb3IgZGVsZXRlcyBsb2NhbCB1c2VyIGFjY291bnRzIGFzIG5lZWRlZCwKIyBhbmQgY29waWVzIHRoZSBwdWJsaWMga2V5IHRvIC9ob21lL3VzZXJuYW1lLy5zc2gvYXV0aG9yaXplZF9rZXlzCgpjYXQgPiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMgPDwgJ0VPRicKIyEvdXNyL2Jpbi9lbnYgYmFzaAoKIyBUaGUgZmlsZSB3aWxsIGxvZyB1c2VyIGNoYW5nZXMKTE9HX0ZJTEU9Ii92YXIvbG9nL2Jhc3Rpb24vdXNlcnNfY2hhbmdlbG9nLnR4dCIKCiMgVGhlIGZ1bmN0aW9uIHJldHVybnMgdGhlIHVzZXIgbmFtZSBmcm9tIHRoZSBwdWJsaWMga2V5IGZpbGUgbmFtZS4KIyBFeGFtcGxlOiBwdWJsaWMta2V5cy9zc2h1c2VyLnB1YiA9PiBzc2h1c2VyCmdldF91c2VyX25hbWUgKCkgewogIGVjaG8gIiQxIiB8IHNlZCAtZSAicy8uKlwvLy9nIiB8IHNlZCAtZSAicy9cLnB1Yi8vZyIKfQoKIyBGb3IgZWFjaCBwdWJsaWMga2V5IGF2YWlsYWJsZSBpbiB0aGUgUzMgYnVja2V0CmF3cyBzM2FwaSBsaXN0LW9iamVjdHMgLS1idWNrZXQgc2FuZGJveC1iYXN0aW9uLWRhdGEgLS1wcmVmaXggcHVibGljLWtleXMvIC0tcmVnaW9uIHVzLWVhc3QtMSAtLW91dHB1dCB0ZXh0IC0tcXVlcnkgJ0NvbnRlbnRzWz9TaXplPmAwYF0uS2V5JyB8IHRyICdcdCcgJ1xuJyA+IH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMwp3aGlsZSByZWFkIGxpbmU7IGRvCiAgVVNFUl9OQU1FPSJgZ2V0X3VzZXJfbmFtZSAiJGxpbmUiYCIKCiAgIyBNYWtlIHN1cmUgdGhlIHVzZXIgbmFtZSBpcyBhbHBoYW51bWVyaWMKICBpZiBbWyAiJFVTRVJfTkFNRSIgPX4gXlthLXpdWy1hLXowLTldKiQgXV07IHRoZW4KCiAgICAjIENyZWF0ZSBhIHVzZXIgYWNjb3VudCBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0CiAgICBjdXQgLWQ6IC1mMSAvZXRjL3Bhc3N3ZCB8IGdyZXAgLXF4ICRVU0VSX05BTUUKICAgIGlmIFsgJD8gLWVxIDEgXTsgdGhlbgogICAgICAvdXNyL3NiaW4vYWRkdXNlciAkVVNFUl9OQU1FICYmIFwKICAgICAgbWtkaXIgLW0gNzAwIC9ob21lLyRVU0VSX05BTUUvLnNzaCAmJiBcCiAgICAgIGNob3duICRVU0VSX05BTUU6JFVTRVJfTkFNRSAvaG9tZS8kVVNFUl9OQU1FLy5zc2ggJiYgXAogICAgICBlY2hvICIkbGluZSIgPj4gfi9rZXlzX2luc3RhbGxlZCAmJiBcCiAgICAgIGVjaG8gImBkYXRlIC0tZGF0ZT0idG9kYXkiICIrJVktJW0tJWQgJUgtJU0tJVMiYDogQ3JlYXRpbmcgdXNlciBhY2NvdW50IGZvciAkVVNFUl9OQU1FICgkbGluZSkiID4+ICRMT0dfRklMRQogICAgZmkKCiAgICAjIENvcHkgdGhlIHB1YmxpYyBrZXkgZnJvbSBTMywgaWYgYW4gdXNlciBhY2NvdW50IHdhcyBjcmVhdGVkIGZyb20gdGhpcyBrZXkKICAgIGlmIFsgLWYgfi9rZXlzX2luc3RhbGxlZCBdOyB0aGVuCiAgICAgIGdyZXAgLXF4ICIkbGluZSIgfi9rZXlzX2luc3RhbGxlZAogICAgICBpZiBbICQ/IC1lcSAwIF07IHRoZW4KICAgICAgICBhd3MgczMgY3AgczM6Ly9zYW5kYm94LWJhc3Rpb24tZGF0YS8kbGluZSAvaG9tZS8kVVNFUl9OQU1FLy5zc2gvYXV0aG9yaXplZF9rZXlzIC0tcmVnaW9uIHVzLWVhc3QtMQogICAgICAgIGNobW9kIDYwMCAvaG9tZS8kVVNFUl9OQU1FLy5zc2gvYXV0aG9yaXplZF9rZXlzCiAgICAgICAgY2hvd24gJFVTRVJfTkFNRTokVVNFUl9OQU1FIC9ob21lLyRVU0VSX05BTUUvLnNzaC9hdXRob3JpemVkX2tleXMKICAgICAgZmkKICAgIGZpCgogIGZpCmRvbmUgPCB+L2tleXNfcmV0cmlldmVkX2Zyb21fczMKCiMgUmVtb3ZlIHVzZXIgYWNjb3VudHMgd2hvc2UgcHVibGljIGtleSB3YXMgZGVsZXRlZCBmcm9tIFMzCmlmIFsgLWYgfi9rZXlzX2luc3RhbGxlZCBdOyB0aGVuCiAgc29ydCAtdW8gfi9rZXlzX2luc3RhbGxlZCB+L2tleXNfaW5zdGFsbGVkCiAgc29ydCAtdW8gfi9rZXlzX3JldHJpZXZlZF9mcm9tX3MzIH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMwogIGNvbW0gLTEzIH4va2V5c19yZXRyaWV2ZWRfZnJvbV9zMyB+L2tleXNfaW5zdGFsbGVkIHwgc2VkICJzL1x0Ly9nIiA+IH4va2V5c190b19yZW1vdmUKICB3aGlsZSByZWFkIGxpbmU7IGRvCiAgICBVU0VSX05BTUU9ImBnZXRfdXNlcl9uYW1lICIkbGluZSJgIgogICAgZWNobyAiYGRhdGUgLS1kYXRlPSJ0b2RheSIgIislWS0lbS0lZCAlSC0lTS0lUyJgOiBSZW1vdmluZyB1c2VyIGFjY291bnQgZm9yICRVU0VSX05BTUUgKCRsaW5lKSIgPj4gJExPR19GSUxFCiAgICAvdXNyL3NiaW4vdXNlcmRlbCAtciAtZiAkVVNFUl9OQU1FCiAgZG9uZSA8IH4va2V5c190b19yZW1vdmUKICBjb21tIC0zIH4va2V5c19pbnN0YWxsZWQgfi9rZXlzX3RvX3JlbW92ZSB8IHNlZCAicy9cdC8vZyIgPiB+L3RtcCAmJiBtdiB+L3RtcCB+L2tleXNfaW5zdGFsbGVkCmZpCgpFT0YKCmNobW9kIDcwMCAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBJTlNUQUxMIFNFQ1VSSVRZIFVQREFURVMgIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIFNlY3VyaXR5IHVwZGF0ZXMgYXJlIGluc3RhbGxlZCBieSB5dW0uIElmIHNjcmlwdCBpcyB1cGRhdGVkIChwYWNrYWdlIHV0aWwtbGludXgpCiMgdGhlbiB0aGUgc2V0dWlkIGJpdCBuZWVkcyB0byBiZSByZWNvdmVyZWQuIE90aGVyd2lzZSBjbGllbnRzIGNhbiBub3QgbG9naW5nLgoKY2F0ID4gL3Vzci9iaW4vYmFzdGlvbi95dW1fdXBkYXRlIDw8ICdFT0YnCiMhL3Vzci9iaW4vZW52IGJhc2gKCnl1bSAteSB1cGRhdGUgLS1zZWN1cml0eQoKY2hvd24gcm9vdDplYzItdXNlciAvdXNyL2Jpbi9zY3JpcHQKY2htb2QgZytzIC91c3IvYmluL3NjcmlwdAoKRU9GCgpjaG1vZCA3MDAgL3Vzci9iaW4vYmFzdGlvbi95dW1fdXBkYXRlCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBTQ0hFRFVMRSBTQ1JJUFRTIEFORCBTRUNVUklUWSBVUERBVEVTICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmNhdCA+IH4vbXljcm9uIDw8IEVPRgoqLzUgKiAqICogKiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfdXNlcnMKMCAwICogKiAqIC91c3IvYmluL2Jhc3Rpb24veXVtX3VwZGF0ZQoqLzUgKiAqICogKiAvdXNyL2Jpbi9iYXN0aW9uL3N5bmNfczMKRU9GCmNyb250YWIgfi9teWNyb24Kcm0gfi9teWNyb24KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBBZGQgQ3VzdG9tIGV4dHJhX3VzZXJfZGF0YV9jb250ZW50ICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCg=="
        # (11 unchanged attributes hidden)

        # (7 unchanged blocks hidden)
    }

  # module.bastion.aws_route53_record.bastion_record_name[0] will be created
  + resource "aws_route53_record" "bastion_record_name" {
      + allow_overwrite = (known after apply)
      + fqdn            = (known after apply)
      + id              = (known after apply)
      + name            = "sandbox-bastion.conexus-project.org"
      + type            = "A"
      + zone_id         = "/hostedzone/Z3R4OFCQLKSFLO"

      + alias {
          + evaluate_target_health = true
          + name                   = "bastion-lt-lb-c3c156de9c79cd2f.elb.us-east-1.amazonaws.com"
          + zone_id                = "Z26RNL4JYFTOTI"
        }
    }

  # module.bastion.aws_s3_bucket.bucket will be created
  + resource "aws_s3_bucket" "bucket" {
      + acceleration_status         = (known after apply)
      + acl                         = (known after apply)
      + arn                         = (known after apply)
      + bucket                      = "sandbox-bastion-data"
      + bucket_domain_name          = (known after apply)
      + bucket_prefix               = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + object_lock_enabled         = (known after apply)
      + policy                      = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags                        = {
          + "description" = "Bastion host for sandbox environment"
          + "name"        = "sandbox_bastion_name"
        }
      + tags_all                    = {
          + "description" = "Bastion host for sandbox environment"
          + "name"        = "sandbox_bastion_name"
        }
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)
    }

  # module.bastion.aws_s3_bucket_acl.bucket will be created
  + resource "aws_s3_bucket_acl" "bucket" {
      + acl    = "private"
      + bucket = (known after apply)
      + id     = (known after apply)
    }

  # module.bastion.aws_s3_bucket_lifecycle_configuration.bucket will be created
  + resource "aws_s3_bucket_lifecycle_configuration" "bucket" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + id     = "log"
          + status = "Disabled"

          + expiration {
              + days                         = 90
              + expired_object_delete_marker = (known after apply)
            }

          + filter {
              + prefix = "logs/"
            }

          + transition {
              + days          = 30
              + storage_class = "STANDARD_IA"
            }
          + transition {
              + days          = 60
              + storage_class = "GLACIER"
            }
        }
    }

  # module.bastion.aws_s3_bucket_ownership_controls.bucket-acl-ownership will be created
  + resource "aws_s3_bucket_ownership_controls" "bucket-acl-ownership" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + object_ownership = "BucketOwnerPreferred"
        }
    }

  # module.bastion.aws_s3_bucket_server_side_encryption_configuration.bucket will be created
  + resource "aws_s3_bucket_server_side_encryption_configuration" "bucket" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + apply_server_side_encryption_by_default {
              + kms_master_key_id = "3de77e16-6bf1-4583-a4fd-7f963554cbf8"
              + sse_algorithm     = "aws:kms"
            }
        }
    }

  # module.bastion.aws_s3_bucket_versioning.bucket will be created
  + resource "aws_s3_bucket_versioning" "bucket" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + versioning_configuration {
          + mfa_delete = (known after apply)
          + status     = "Enabled"
        }
    }

  # module.bastion.aws_s3_object.bucket_public_keys_readme will be created
  + resource "aws_s3_object" "bucket_public_keys_readme" {
      + bucket                 = (known after apply)
      + bucket_key_enabled     = (known after apply)
      + content                = "Drop here the ssh public keys of the instances you want to control"
      + content_type           = (known after apply)
      + etag                   = (known after apply)
      + force_destroy          = false
      + id                     = (known after apply)
      + key                    = "public-keys/README.txt"
      + kms_key_id             = "arn:aws:kms:us-east-1:957770628377:key/3de77e16-6bf1-4583-a4fd-7f963554cbf8"
      + server_side_encryption = (known after apply)
      + storage_class          = (known after apply)
      + tags_all               = (known after apply)
      + version_id             = (known after apply)
    }

  # module.eks.module.kms.aws_kms_key.this[0] will be updated in-place
  ~ resource "aws_kms_key" "this" {
        id                                 = "c776a209-f781-4980-b507-6c02735b8a67"
      ~ policy                             = jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = [
                              - "arn:aws:iam::957770628377:user/oscluster",
                              - "arn:aws:iam::957770628377:user/madhav.kundala",
                            ] -> "arn:aws:iam::957770628377:user/madhav.kundala"
                        }
                        # (4 unchanged attributes hidden)
                    },
                  ~ {
                      ~ Action    = [
                            # (4 unchanged elements hidden)
                            "kms:Decrypt",
                          - "kms:Get*",
                          - "kms:List*",
                        ]
                      ~ Principal = {
                          ~ AWS = [
                              - "arn:aws:iam::957770628377:role/conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002",
                              - "arn:aws:iam::957770628377:user/madhav.kundala",
                            ] -> "arn:aws:iam::957770628377:role/conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002"
                        }
                        # (3 unchanged attributes hidden)
                    },
                ]
                # (1 unchanged attribute hidden)
            }
        )
        tags                               = {}
        # (10 unchanged attributes hidden)
    }

Plan: 12 to add, 2 to change, 1 to destroy.

───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Saved the plan to: planoutput

To perform exactly these actions, run the following command to apply:
    terraform apply "planoutput"
conexus fedora:~/conexus/src-conexus-bitbucket/prod/scripts/terraform (feature/terraform)$ 
╷
│ Error: creating Auto Scaling Group (ASG-bastion-lt20230720012437299100000002): ValidationError: You must use a valid fully-formed launch template. The key pair 'kundalam01' does not exist
│ 	status code: 400, request id: ebdcf70f-e32d-4761-9811-49715fd7181a
│ 
│   with module.bastion.aws_autoscaling_group.bastion_auto_scaling_group,
│   on .terraform/modules/bastion/main.tf line 275, in resource "aws_autoscaling_group" "bastion_auto_scaling_group":
│  275: resource "aws_autoscaling_group" "bastion_auto_scaling_group" {
│ 
╵
conexus fedora:~/conexus/src-conexus-bitbucket/prod/scripts/terraform (feature/terraform)$ terraform apply "planoutput"
╷
│ Error: Saved plan is stale
│ 
│ The given plan file can no longer be applied because the state was changed by another operation after the plan was created.
╵
conexus fedora:~/conexus/src-conexus-bitbucket/prod/scripts/terraform (feature/terraform)$ terraform plan -out=planoutput
random_string.suffix: Refreshing state... [id=PiXj0AhG]
data.aws_iam_policy.ebs_csi_policy: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_caller_identity.current: Reading...
module.bastion.aws_kms_key.key: Refreshing state... [id=3de77e16-6bf1-4583-a4fd-7f963554cbf8]
module.eks.module.eks_managed_node_group["one"].data.aws_partition.current: Reading...
module.eks.module.eks_managed_node_group["one"].data.aws_caller_identity.current: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_partition.current: Reading...
module.eks.aws_cloudwatch_log_group.this[0]: Refreshing state... [id=/aws/eks/conexus-dev-eks-PiXj0AhG/cluster]
module.eks.module.kms.data.aws_partition.current: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_partition.current: Read complete after 0s [id=aws]
module.vpc.aws_vpc.this[0]: Refreshing state... [id=vpc-06b7b0c3a2762dfc4]
module.eks.module.eks_managed_node_group["one"].data.aws_partition.current: Read complete after 0s [id=aws]
module.eks.module.kms.data.aws_partition.current: Read complete after 0s [id=aws]
module.bastion.data.aws_iam_policy_document.assume_policy_document: Reading...
module.eks.data.aws_caller_identity.current: Reading...
module.irsa-ebs-csi.data.aws_caller_identity.current: Reading...
module.bastion.data.aws_iam_policy_document.assume_policy_document: Read complete after 0s [id=2851119427]
module.bastion.data.aws_kms_alias.kms-ebs: Reading...
module.bastion.data.aws_ami.amazon-linux-2: Reading...
module.eks.data.aws_caller_identity.current: Read complete after 1s [id=957770628377]
module.eks.module.kms.data.aws_caller_identity.current: Reading...
module.irsa-ebs-csi.data.aws_caller_identity.current: Read complete after 1s [id=957770628377]
module.eks.module.eks_managed_node_group["two"].data.aws_caller_identity.current: Read complete after 1s [id=957770628377]
module.eks.module.eks_managed_node_group["one"].data.aws_caller_identity.current: Read complete after 1s [id=957770628377]
data.aws_availability_zones.available: Reading...
module.bastion.aws_s3_bucket.bucket: Refreshing state... [id=sandbox-bastion-data]
module.irsa-ebs-csi.data.aws_partition.current: Reading...
module.irsa-ebs-csi.data.aws_partition.current: Read complete after 0s [id=aws]
module.eks.data.aws_partition.current: Reading...
module.eks.data.aws_partition.current: Read complete after 0s [id=aws]
module.eks.module.eks_managed_node_group["two"].data.aws_iam_policy_document.assume_role_policy[0]: Reading...
module.eks.module.eks_managed_node_group["two"].data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2560088296]
module.eks.module.eks_managed_node_group["one"].data.aws_iam_policy_document.assume_role_policy[0]: Reading...
data.aws_iam_policy.ebs_csi_policy: Read complete after 1s [id=arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy]
module.eks.module.kms.data.aws_caller_identity.current: Read complete after 0s [id=957770628377]
module.eks.module.eks_managed_node_group["one"].data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2560088296]
module.book.data.aws_ami.amzn-linux-2023-ami: Reading...
module.eks.data.aws_iam_session_context.current: Reading...
module.bastion.aws_iam_role.bastion_host_role: Refreshing state... [id=terraform-20230720010035803900000001]
module.bastion.data.aws_kms_alias.kms-ebs: Read complete after 1s [id=arn:aws:kms:us-east-1:957770628377:alias/aws/ebs]
module.eks.data.aws_iam_session_context.current: Read complete after 0s [id=arn:aws:iam::957770628377:user/madhav.kundala]
module.eks.module.eks_managed_node_group["one"].aws_iam_role.this[0]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003]
module.eks.module.eks_managed_node_group["two"].aws_iam_role.this[0]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001]
module.eks.data.aws_iam_policy_document.assume_role_policy[0]: Reading...
module.eks.data.aws_iam_policy_document.assume_role_policy[0]: Read complete after 0s [id=2764486067]
module.eks.aws_iam_role.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002]
module.bastion.aws_kms_alias.alias: Refreshing state... [id=alias/sandbox-bastion-data]
data.aws_availability_zones.available: Read complete after 0s [id=us-east-1]
module.book.data.aws_ami.amzn-linux-2023-ami: Read complete after 1s [id=ami-06ca3ca175f37dd66]
module.bastion.aws_iam_instance_profile.bastion_host_profile: Refreshing state... [id=terraform-20230720010038858500000003]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730490400000004]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730554800000006]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730865300000009]
module.eks.module.eks_managed_node_group["one"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"]: Refreshing state... [id=node-group-1-eks-node-group-20230511190728496100000003-20230511190730758800000007]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730535800000005]
module.eks.module.eks_managed_node_group["two"].aws_iam_role_policy_attachment.this["arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"]: Refreshing state... [id=node-group-2-eks-node-group-20230511190728439300000001-20230511190730850300000008]
module.eks.aws_iam_role_policy_attachment.this["AmazonEKSVPCResourceController"]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119073098720000000a]
module.eks.aws_iam_role_policy_attachment.this["AmazonEKSClusterPolicy"]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119073107180000000b]
module.eks.module.kms.data.aws_iam_policy_document.this[0]: Reading...
module.eks.module.kms.data.aws_iam_policy_document.this[0]: Read complete after 0s [id=2715916501]
module.eks.module.kms.aws_kms_key.this[0]: Refreshing state... [id=c776a209-f781-4980-b507-6c02735b8a67]
module.book.aws_security_group.instance: Refreshing state... [id=sg-011a532df1ae0dc37]
module.bastion.aws_security_group.bastion_host_security_group[0]: Refreshing state... [id=sg-0291851ad17e47bb9]
module.vpc.aws_default_security_group.this[0]: Refreshing state... [id=sg-0a2ed117fab7ce933]
module.vpc.aws_default_route_table.default[0]: Refreshing state... [id=rtb-0a37c83fd7c936c17]
module.vpc.aws_default_network_acl.this[0]: Refreshing state... [id=acl-08dbb543a6be803ef]
module.bastion.aws_security_group.private_instances_security_group: Refreshing state... [id=sg-0ec915aa6a1ada70c]
module.bastion.aws_lb_target_group.bastion_lb_target_group[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:targetgroup/bastion-lt-lb-target/fa113f30fd94413c]
module.eks.aws_security_group.cluster[0]: Refreshing state... [id=sg-0d3a3e3e96fd396a1]
module.vpc.aws_route_table.private[0]: Refreshing state... [id=rtb-05773284301bcbc65]
module.vpc.aws_subnet.private[0]: Refreshing state... [id=subnet-09cf72e6f9acc499f]
module.eks.aws_security_group.node[0]: Refreshing state... [id=sg-0ac07c7eb308b8ddc]
module.vpc.aws_subnet.private[2]: Refreshing state... [id=subnet-0554efb8f0730ee7f]
module.vpc.aws_subnet.private[1]: Refreshing state... [id=subnet-08d8293285c14623e]
module.vpc.aws_subnet.public[0]: Refreshing state... [id=subnet-0d4df1cc1b29d0b5f]
module.vpc.aws_subnet.public[1]: Refreshing state... [id=subnet-0a4702a13f0a35ec0]
module.vpc.aws_subnet.public[2]: Refreshing state... [id=subnet-0fa87d8368e2ce745]
module.vpc.aws_route_table.public[0]: Refreshing state... [id=rtb-07fd0e3546bec53f0]
module.vpc.aws_internet_gateway.this[0]: Refreshing state... [id=igw-0a7d040987e4e099e]
module.book.aws_instance.experiement: Refreshing state... [id=i-09677525c4911e930]
module.eks.module.kms.aws_kms_alias.this["cluster"]: Refreshing state... [id=alias/eks/conexus-dev-eks-PiXj0AhG]
module.bastion.aws_security_group_rule.ingress_instances: Refreshing state... [id=sgrule-4145116239]
module.bastion.aws_security_group_rule.egress_bastion[0]: Refreshing state... [id=sgrule-3202349969]
module.eks.aws_security_group_rule.node["ingress_nodes_ephemeral"]: Refreshing state... [id=sgrule-4251137344]
module.eks.aws_security_group_rule.node["ingress_cluster_kubelet"]: Refreshing state... [id=sgrule-4038711744]
module.eks.aws_iam_policy.cluster_encryption[0]: Refreshing state... [id=arn:aws:iam::957770628377:policy/conexus-dev-eks-PiXj0AhG-cluster-ClusterEncryption2023051119075000300000000e]
module.eks.aws_security_group_rule.node["ingress_cluster_6443_webhook"]: Refreshing state... [id=sgrule-2926561331]
module.eks.aws_security_group_rule.node["ingress_cluster_443"]: Refreshing state... [id=sgrule-3960963871]
module.eks.aws_security_group_rule.node["ingress_cluster_9443_webhook"]: Refreshing state... [id=sgrule-3650275289]
module.eks.aws_security_group_rule.node["ingress_self_coredns_tcp"]: Refreshing state... [id=sgrule-3477008815]
module.eks.aws_security_group_rule.node["egress_all"]: Refreshing state... [id=sgrule-3851446332]
module.eks.aws_security_group_rule.node["ingress_cluster_8443_webhook"]: Refreshing state... [id=sgrule-3174298642]
module.eks.aws_security_group_rule.node["ingress_cluster_4443_webhook"]: Refreshing state... [id=sgrule-1731047333]
module.eks.aws_security_group_rule.node["ingress_self_coredns_udp"]: Refreshing state... [id=sgrule-1801540160]
module.eks.aws_security_group_rule.cluster["ingress_nodes_443"]: Refreshing state... [id=sgrule-4209430522]
module.vpc.aws_route_table_association.private[0]: Refreshing state... [id=rtbassoc-061c7d3659731cf00]
module.vpc.aws_route_table_association.private[1]: Refreshing state... [id=rtbassoc-01e0e32664c196191]
module.vpc.aws_route_table_association.private[2]: Refreshing state... [id=rtbassoc-077d88479534111bf]
module.vpc.aws_route_table_association.public[1]: Refreshing state... [id=rtbassoc-02cfde69e841a7ee4]
module.vpc.aws_route_table_association.public[0]: Refreshing state... [id=rtbassoc-0011daca02b52c3fc]
module.vpc.aws_route_table_association.public[2]: Refreshing state... [id=rtbassoc-011b0e843b092a57a]
module.bastion.aws_s3_object.bucket_public_keys_readme: Refreshing state... [id=public-keys/README.txt]
module.bastion.aws_s3_bucket_server_side_encryption_configuration.bucket: Refreshing state... [id=sandbox-bastion-data]
module.bastion.aws_s3_bucket_lifecycle_configuration.bucket: Refreshing state... [id=sandbox-bastion-data]
module.bastion.aws_s3_bucket_versioning.bucket: Refreshing state... [id=sandbox-bastion-data]
module.bastion.data.aws_iam_policy_document.bastion_host_policy_document: Reading...
module.bastion.data.aws_iam_policy_document.bastion_host_policy_document: Read complete after 1s [id=3531425098]
module.bastion.aws_s3_bucket_ownership_controls.bucket-acl-ownership: Refreshing state... [id=sandbox-bastion-data]
module.vpc.aws_eip.nat[0]: Refreshing state... [id=eipalloc-0f971a663bf23f055]
module.vpc.aws_route.public_internet_gateway[0]: Refreshing state... [id=r-rtb-07fd0e3546bec53f01080289494]
module.eks.aws_iam_role_policy_attachment.cluster_encryption[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG-cluster-20230511190728444700000002-2023051119075083200000000f]
module.bastion.aws_iam_policy.bastion_host_policy: Refreshing state... [id=arn:aws:iam::957770628377:policy/SandboxBastionHostPolicy]
module.bastion.data.aws_subnet.subnets[0]: Reading...
module.eks.aws_eks_cluster.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG]
module.bastion.aws_lb.bastion_lb[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:loadbalancer/net/bastion-lt-lb/c3c156de9c79cd2f]
module.bastion.data.aws_subnet.subnets[1]: Reading...
module.bastion.data.aws_subnet.subnets[0]: Read complete after 0s [id=subnet-0d4df1cc1b29d0b5f]
module.bastion.aws_s3_bucket_acl.bucket: Refreshing state... [id=sandbox-bastion-data,private]
module.bastion.data.aws_subnet.subnets[2]: Reading...
module.bastion.data.aws_subnet.subnets[1]: Read complete after 0s [id=subnet-0a4702a13f0a35ec0]
module.vpc.aws_nat_gateway.this[0]: Refreshing state... [id=nat-0b2743787ac173501]
module.bastion.aws_iam_role_policy_attachment.bastion_host: Refreshing state... [id=terraform-20230720010035803900000001-20230720012439051000000003]
module.bastion.data.aws_subnet.subnets[2]: Read complete after 0s [id=subnet-0fa87d8368e2ce745]
module.bastion.aws_security_group_rule.ingress_bastion[0]: Refreshing state... [id=sgrule-235100370]
module.vpc.aws_route.private_nat_gateway[0]: Refreshing state... [id=r-rtb-05773284301bcbc651080289494]
module.bastion.aws_lb_listener.bastion_lb_listener_22[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:957770628377:listener/net/bastion-lt-lb/c3c156de9c79cd2f/d2538939de46a466]
module.bastion.aws_route53_record.bastion_record_name[0]: Refreshing state... [id=Z3R4OFCQLKSFLO_sandbox-bastion.conexus-project.org._A]
module.eks.time_sleep.this[0]: Refreshing state... [id=2023-07-20T01:01:05Z]
module.eks.data.tls_certificate.this[0]: Reading...
module.irsa-ebs-csi.data.aws_iam_policy_document.assume_role_with_oidc[0]: Reading...
module.irsa-ebs-csi.data.aws_iam_policy_document.assume_role_with_oidc[0]: Read complete after 0s [id=1487332657]
module.eks.module.eks_managed_node_group["one"].aws_launch_template.this[0]: Refreshing state... [id=lt-0675273a2d89cfef5]
module.irsa-ebs-csi.aws_iam_role.this[0]: Refreshing state... [id=AmazonEKSTFEBSCSIRole-conexus-dev-eks-PiXj0AhG]
module.eks.module.eks_managed_node_group["two"].aws_launch_template.this[0]: Refreshing state... [id=lt-0950e32c15e19edf1]
module.eks.module.eks_managed_node_group["one"].aws_eks_node_group.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:node-group-1-20230511191751616000000015]
module.eks.module.eks_managed_node_group["two"].aws_eks_node_group.this[0]: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:node-group-2-20230511191751620900000017]
module.irsa-ebs-csi.aws_iam_role_policy_attachment.custom[0]: Refreshing state... [id=AmazonEKSTFEBSCSIRole-conexus-dev-eks-PiXj0AhG-2023051119175238380000001a]
aws_eks_addon.ebs-csi: Refreshing state... [id=conexus-dev-eks-PiXj0AhG:aws-ebs-csi-driver]
module.eks.data.tls_certificate.this[0]: Read complete after 1s [id=5933588ce34e24e9fb40c3565fb0b5993639df67]
module.eks.aws_iam_openid_connect_provider.oidc_provider[0]: Refreshing state... [id=arn:aws:iam::957770628377:oidc-provider/oidc.eks.us-east-1.amazonaws.com/id/3CEFF85305278144674460CDFB2409A0]
module.bastion.data.aws_ami.amazon-linux-2: Read complete after 7s [id=ami-029eb80bc237bec6f]
module.bastion.aws_launch_template.bastion_launch_template: Refreshing state... [id=lt-0224eb2f71cb91e78]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # module.bastion.aws_autoscaling_group.bastion_auto_scaling_group will be created
  + resource "aws_autoscaling_group" "bastion_auto_scaling_group" {
      + arn                       = (known after apply)
      + availability_zones        = (known after apply)
      + default_cooldown          = 180
      + desired_capacity          = 1
      + force_delete              = false
      + force_delete_warm_pool    = false
      + health_check_grace_period = 180
      + health_check_type         = "EC2"
      + id                        = (known after apply)
      + load_balancers            = (known after apply)
      + max_size                  = 1
      + metrics_granularity       = "1Minute"
      + min_size                  = 1
      + name                      = (known after apply)
      + name_prefix               = "ASG-bastion-lt"
      + predicted_capacity        = (known after apply)
      + protect_from_scale_in     = false
      + service_linked_role_arn   = (known after apply)
      + target_group_arns         = [
          + "arn:aws:elasticloadbalancing:us-east-1:957770628377:targetgroup/bastion-lt-lb-target/fa113f30fd94413c",
        ]
      + termination_policies      = [
          + "OldestLaunchConfiguration",
        ]
      + vpc_zone_identifier       = [
          + "subnet-0a4702a13f0a35ec0",
          + "subnet-0d4df1cc1b29d0b5f",
          + "subnet-0fa87d8368e2ce745",
        ]
      + wait_for_capacity_timeout = "10m"
      + warm_pool_size            = (known after apply)

      + instance_refresh {
          + strategy = "Rolling"
        }

      + launch_template {
          + id      = "lt-0224eb2f71cb91e78"
          + name    = (known after apply)
          + version = "2"
        }

      + tag {
          + key                 = "Name"
          + propagate_at_launch = true
          + value               = "ASG-bastion-lt"
        }
      + tag {
          + key                 = "description"
          + propagate_at_launch = true
          + value               = "Bastion host for sandbox environment"
        }
      + tag {
          + key                 = "name"
          + propagate_at_launch = true
          + value               = "sandbox_bastion_name"
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.

───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Saved the plan to: planoutput

To perform exactly these actions, run the following command to apply:
    terraform apply "planoutput"
conexus fedora:~/conexus/src-conexus-bitbucket/prod/scripts/terraform (feature/terraform)$ 


